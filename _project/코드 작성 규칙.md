# 코드 작성 규칙

## 컨트롤러 작성 시 아래 규칙을 준수합니다.

```ts
import { carService } from './car-service.js';

export const carController = {
  async create(...) {

    ...
    const result = await carService.createCar(...);

    res.status(200).json(result);
  },

  async update(...) {

    ...

  res.status(200).json(car);
  }
}
```

- 각 메서드는 비동기 함수로 작성합니다.
- 각 메서드는 `req`, `res` 파라미터를 가집니다.
- `next` 파라미터는 필요 시에만 추가합니다.
  - aync-handler를 route에 적용한 경우에는 `next` 파라미터를 생략합니다.
- 비즈니스 로직은 서비스 레이어에 위임합니다.
- 각 메서드는 `res.status(...).json(...)` 형태로 응답을 반환합니다.
- 상황에 맞게 에러 핸들러 이용해주세요

## 서비스 작성 시 아래 규칙을 준수합니다.

```ts
import { prisma } from '../config/prisma.js';

export const carService = {
  async createCar(...) {

    ...

    await prisma.car.create(...);

    return createdCar;
  },
  async updateCar(...) {

    ...

    return updatedCar;
  }
}
```

- 각 메서드는 비동기 함수로 작성합니다.
- 비즈니스 로직을 구현합니다.
- 필요한 경우, 여러 개의 서비스 메서드를 호출할 수 있습니다.
- 각 메서드는 처리 결과를 반환합니다.
- 상황에 맞게 에러 핸들러 이용해주세요
- 데이터베이스 접근은 원래라면 레포지토리에 위임해야 하지만, 현재는 서비스 레이어에서 직접 Prisma Client를 사용하겠습니다. 아직 중급 단계에서 레포지토리 레이어를 분리하는 것은 부담스러울 수 있으므로, 서비스 레이어에서 직접 데이터베이스 접근을 처리합니다.
- 향후 프로젝트가 더 복잡해지거나, 데이터베이스 접근 로직이 많아질 경우, 레포지토리 레이어를 도입하는 것을 고려할 수 있습니다.

## route 작성 시 아래 규칙을 준수합니다.

```ts
import { carController } from './car-controller.js';
import { Router } from 'express';
import asyncHandler from '../error/async-handler.js';

export const router = Router();

router.post('/', asyncHandler(carController.create));

export default router;
```

- 각 route는 `express.Router()` 인스턴스를 생성합니다.
- 각 route는 컨트롤러 메서드를 `asyncHandler`로 감싸서 비동기 에러를 처리합니다.
- route 파일은 기본적으로 `export default router;` 형태로 내보냅니다.

## app.ts 작성 시 아래 규칙을 준수합니다.

```ts
import express from 'express';
import carRoutes from './car/car-router.js';
// [모듈 네임] + 'Routes' 형태로 import 합니다.

...

app.use('/cars', carRoutes);
```

## 폴더 구조

```bash
module/
  ├── cars/ # 복수형 폴더명 사용
      ├── car-controller.ts # 단수형 파일명 사용
      ├── car-service.ts
      ├── car-router.ts
      ├── car-validator.ts # 유효성 검사나 관련 미들웨어 작성

```

## 궁금한 점이 있으면 언제든지 물어보세요!
